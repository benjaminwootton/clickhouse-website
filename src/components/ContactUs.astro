---
// Components
import Button from "components/Button.astro";

const inputStyle = `block rounded-[0.5rem] bg-white p-4 text-base mt-2 w-full text-base
    border-[1px] border-[#CECFD5]`
---

<section class="wrapper flex gap-8 lg:flex-row flex-col mt-12">
    <div class="flex-[1]">
        <h2>Get In Touch</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras pharetra molestie faucibus. Pellentesque vel imperdiet lectus. Aenean pharetra maximus vulputate. </p>
    
        <a href="#">
            <img
                src="/images/icons/email-black.svg"
                alt="Email us"
            >
        </a>
    </div>

    <form 
        class="
            flex-[1.3]
            [&_label]:py-3 [&_label]:block [&_label]:text-sm
            bg-light-blue rounded-2xl py-6 px-4 md:py-10 md:px-12
        "
        action="https://api.web3forms.com/submit"
        method="POST"
        id="contact-form"
    >

        <div class="text-center">
            <h3>Send a Message</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras pharetra molestie faucibus.</p>
        </div>

        <input type="hidden" name="access_key" value="#">

        <label>
            Question Type*
            <select class={inputStyle}>
                <option value="General Inquiry">General Inquiry</option>
                <option value="Technical Support">Technical Support</option>
                <option value="Sales Inquiry">Sales Inquiry</option>
                <option value="Other">Other</option>
            </select>
        </label>

        <div class="md:flex md:gap-4">
            <label class="flex-[1]">
                Your Name*
                <input class={inputStyle} placeholder="Your Name" type="text" name="Your Name" required>
            </label>

            <label class="flex-[1]">
                Your Company*
                <input class={inputStyle} placeholder="Your Company" type="text" name="Your Company" required>
            </label>

            <label class="flex-[1]">
                Your Email*
                <input class={inputStyle} placeholder="Your Email" type="email" name="Your Email" required>
            </label>
        </div>

        <label>
            Comment*
            <textarea class={inputStyle} placeholder="Type your comment" name="Comment" required rows={5} />
        </label>

        <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

        <div class="flex justify-between gap-2 mt-3">
            <label class="!flex gap-2 items-center">
                <input type="checkbox" name="Accept Terms & Conditions Of Use" required>
                Accept Terms & Conditions Of Use
            </label>

            <Button 
                text="Sent Message"
                button
                insertClass="!block !m-0 hover:bg-[#ea864b]"
            />
        </div>
    </form>

    <script is:inline>
        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            
            fetch(form.action, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Create thank you message element
                    const thankYouMessage = document.createElement('div');
                    thankYouMessage.innerHTML = `
                        <div class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
                            <div class="bg-white p-8 rounded-lg text-center max-w-md shadow-xl">
                                <h2 class="text-2xl font-bold mb-4 text-orange">Thank You!</h2>
                                <p class="mb-6">Your message has been successfully submitted. We'll get back to you soon.</p>
                                <button id="close-thank-you" class="bg-orange text-white px-6 py-2 rounded hover:bg-[#ea864b] transition">Close</button>
                            </div>
                        </div>
                    `;
                    
                    // Add to body
                    document.body.appendChild(thankYouMessage);
                    
                    // Clear form
                    form.reset();
                    
                    // Close button functionality
                    document.getElementById('close-thank-you').addEventListener('click', () => {
                        document.body.removeChild(thankYouMessage);
                    });
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('There was an error submitting your form. Please try again.');
            });
        });
    </script>
</section>
